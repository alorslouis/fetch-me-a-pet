---
import { Image } from "astro:assets";
import HTMXImport from "@components/astro/HTMXImport.astro";

interface Props {
  title?: string;
  isHTMX?: boolean;
  fullWidth?: boolean;
}

const { title, isHTMX = false } = Astro.props;
const { loggedIn, userObject } = Astro.locals;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="apple-touch-icon" href="/favicon.png" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    {isHTMX && <HTMXImport />}
  </head>

  <body class="text-white flex flex-col bg-slate-950 min-h-dvh">
    <header class="flex sticky top-0 backdrop-blur-2xl z-50 rounded-b-lg">
      <a href="/" class="p-4">
        <Image
          src="https://fetch.com/assets/images/graphics/footer-logo.svg"
          height={50}
          width={50}
          alt={"asd"}
        />
      </a>
      <div
        class="flex gap-4 text-center justify-center ml-auto p-4 items-center"
      >
        {
        loggedIn ? (
        <select class="bg-transparent rounded-lg">
          <option value="astro"> astro </option>
          <option value="react"> react </option>
        </select>
        <p>
          hey, <span class="font-bold">{userObject?.name}</span>
        </p>
        ) : null
        }
        <a
          href={loggedIn ? "/logout" : "/login"}
          class="opacity-60 hover:opacity-100 py-2 hover:bg-white/20 rounded-lg"
        >
          {loggedIn ? "logout" : "login"}
        </a>
      </div>
    </header>

    <main class="flex flex-col grow h-fit">
      <slot />
    </main>

    {
      /*
    <footer
      class="text-white mb-1 mt-4 sticky bottom-0 font-thin py-2 px-4 backdrop-blur-3xl flex w-fit rounded-tr-lg"
    >
      <a href="/" class=""> xyz </a>
    </footer>
*/
    }
  </body>
</html>
